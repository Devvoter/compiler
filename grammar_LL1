/**
 * @file grammar_LL1
 * @author Mariia Sydorenko (xsydorm00)
 * @brief Popis gramatiky v formatu LL(1)
 * 
 * @date 2024-10-09
 * 
 */

START ::= PROLOG CODE

CODE ::= VARIABLE_DEFINITION CODE
       | ID_TOKEN ID_TAIL CODE
       | IF CODE
       | WHILE CODE
       | FUNCTION_DEFINITION CODE
       | STANDARD_FUNCTION_CALL CODE
       | RETURN CODE
       | ε

PROLOG ::= "const" "ifj" "=" "@import(" "\"ifj24.zig\"" ")" ";"

VARIABLE_DEFINITION ::= ( "var" | "const" ) ID_TOKEN VARIABLE_TYPE "=" EXPRESSION ";"

VARIABLE_TYPE ::= ":" DATA_TYPE_TOKEN
                | ε

ID_TAIL ::= "=" EXPRESSION ";" 
              | "(" ARGUMENTS ")"

IF ::= "if" "(" EXPRESSION ")" NULL_EXPRESSION "{" CODE "}" IF_TAIL

NULL_EXPRESSION ::= "|" ID_TOKEN "|"
                  | ε

IF_TAIL ::= "else" "{" CODE "}"
          | ε

WHILE ::= "while" "(" EXPRESSION ")" NULL_EXPRESSION "{" CODE "}"

FUNCTION_DEFINITION ::= "pub" "fn" ID_TOKEN "(" ARGUMENTS ")" FUNCTION_RETURN_TYPE "{" CODE "}"

FUNCTION_RETURN_TYPE ::= DATA_TYPE_TOKEN 
                       | "void"

STANDARD_FUNCTION_CALL ::= "ifj" "." STANDARD_FUNCTION_CALL_TAIL ";"

STANDARD_FUNCTION_CALL_TAIL ::= "readstr" "(" ")"
                              | "readi32" "(" ")"
                              | "readf64" "(" ")"
                              | "write(" ITEM ")"
                              | "i2f" "(" ITEM ")"
                              | "f2i" "(" ITEM ")"
                              | "string" "(" ITEM ")"
                              | "length" "(" ITEM ")"
                              | "concat" "(" ITEM "," ITEM ")"
                              | "substrin" "(" ITEM "," ITEM ")"
                              | "strcmp" "(" ITEM "," ITEM ")"
                              | "ord" "(" ITEM ")"
                              | "chr" "(" ITEM ")"

ARGUMENTS ::= ID_TOKEN ":" DATA_TYPE_TOKEN ARGUMENTS_TAIL
            | ε

ARGUMENTS_TAIL ::= "," ARGUMENTS
                 | ε

RETURN ::= "return" RETURN_TAIL ";"

RETURN_TAIL ::= EXPRESSION 
              | ε

ITEM ::= ID_TOKEN 
       | NUMBER 
       | FP_NUMBER 
       | STRING 
       | "null"

EXPRESSION ::= # here will be another type of analysis

DATA_TYPE_TOKEN ::= "i32" 
                  | "f64" 
                  | "[]u8" 
                  | "?i32" 
                  | "?f64" 
                  | "?[]u8"

OPERATOR ::= "+" 
           | "-" 
           | "*" 
           | "/"

LOGICAL_OPERATOR ::= "==" 
                   | "!=" 
                   | "<" 
                   | ">" 
                   | "<=" 
                   | ">="
